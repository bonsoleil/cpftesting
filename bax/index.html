<!DOCTYPE html>

<head>
<title> Temperature Value </title>
</head>

<body>
	
<center>
	<h1>Temperature Value: </h1>
	<span id=tempvalue> none </span>
</center>
	
<script>
	
	var tempdata;
	
	function main() {
		if(cpf){
			tempdata= cpf.get("a2");
			celsius= toCelsius(tempdata);
			document.getElementById("tempvalue").innerHTML = celsius; 
		}
		setTimeout(main, 1000); 
	}
	
	function setup() {
		cpf.setPinMode('["resetPin"],["setPinMode", "analog", 2, "INPUT"]');
	}
	
	function toCelsius(value) {
		var resistance = parseFloat((1023-value) * 10000 / value);
		var temperature = 1 / (Math.log(resistance / 10000) / 3975+1 / 298.15) - 273.15;
		
		return temperature.toFixed(2);
	}

	
	setup();
	main();
	

</script>
</body>
</html>
